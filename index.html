<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spooky Countdown</title>
    <style>
        body {
            font-family: 'Creepster', cursive; /* Spooky font */
            background-image: url('https://i.imgur.com/6spZjTe.png'); /* Custom background image */
            background-size: 1280px 720px; /* Set background size to 1280x720 */
            background-position: center; /* Center the background image */
            height: 100vh; /* Full viewport height */
            margin: 0; /* Remove default margin */
            overflow: hidden; /* Hide any overflow */
            display: flex; /* Use flexbox to center content */
            flex-direction: column; /* Column direction */
            align-items: center; /* Center horizontally */
            justify-content: center; /* Center vertically */
            position: relative; /* For positioning child elements */
        }

        @import url('https://fonts.googleapis.com/css2?family=Creepster&display=swap'); /* Spooky Font */

        #countdown {
            font-size: 120px;
            font-weight: bold;
            color: rgba(255, 150, 0, 0.9); /* Darker and more legible orange */
            text-shadow: 0 0 15px #ff7518, 0 0 30px #ff7518, 0 0 45px #ff7518; /* Glow effect */
            z-index: 1; /* Ensure it is on top */
            margin: 20px 0; /* Space above and below countdown */
        }

        #message {
            font-size: 30px;
            color: #00ff00; /* Base green color */
            text-shadow: 0 0 15px #00ff00, 0 0 30px #00ff00, 0 0 45px #00ff00; /* Glow effect for spooky messages */
            z-index: 1; /* Ensure it is on top */
            position: relative; /* Keep it above chat */
            margin: 10px 0; /* Space above and below message */
        }

        /* Chat box styling */
        #chat {
            width: 600px; /* Width of the chat */
            height: 200px; /* Height of the chat */
            border: 2px solid rgba(255, 117, 24, 0.8); /* Orange border */
            background: rgba(0, 0, 0, 0.7); /* Semi-transparent black background */
            overflow-y: hidden; /* Hide vertical scroll bar */
            z-index: 1; /* Ensure it is on top */
            position: relative; /* Position relative for potential future adjustments */
            animation: shake 0.5s infinite; /* Add shake animation */
            margin-top: 30px; /* Space above the chat */
        }

        /* Shake animation */
        @keyframes shake {
            0% { transform: translate(0); }
            25% { transform: translate(-2px, 0); }
            50% { transform: translate(2px, 0); }
            75% { transform: translate(-2px, 0); }
            100% { transform: translate(0); }
        }

        /* Hide scrollbar */
        #chat::-webkit-scrollbar {
            display: none; /* Hides scrollbar for WebKit browsers */
        }

        #chat {
            -ms-overflow-style: none;  /* Hide scrollbar for Internet Explorer and Edge */
            scrollbar-width: none;  /* Hide scrollbar for Firefox */
        }

        /* Glitchy effect */
        @keyframes glitch {
            0% { transform: translate(3px, 3px); }
            20% { transform: translate(-3px, 3px); }
            40% { transform: translate(3px, -3px); }
            60% { transform: translate(-3px, -3px); }
            80% { transform: translate(3px, 3px); }
            100% { transform: translate(0, 0); }
        }

        #countdown.glitch {
            animation: glitch 0.2s infinite;
            color: #ff0000; /* Blood red during glitch */
        }

        /* Spotify player styling */
        #spotify-player {
            position: absolute; /* Positioning for the bottom right */
            bottom: 20px; /* Distance from the bottom */
            right: 20px; /* Distance from the right */
            width: 300px; /* Width of the player */
            height: 380px; /* Height of the player */
            z-index: 1; /* Ensure it is on top */
            animation: shake-strong 0.1s infinite; /* Add strong shake animation */
        }

        /* Strong shake animation */
        @keyframes shake-strong {
            0% { transform: translate(0); }
            10% { transform: translate(-3px, -3px); }
            20% { transform: translate(3px, 3px); }
            30% { transform: translate(-3px, 3px); }
            40% { transform: translate(3px, -3px); }
            50% { transform: translate(-3px, 3px); }
            60% { transform: translate(3px, 3px); }
            70% { transform: translate(-3px, -3px); }
            80% { transform: translate(3px, -3px); }
            90% { transform: translate(-3px, -3px); }
            100% { transform: translate(0); }
        }
    </style>
</head>
<body>

    <div id="countdown">15:00</div>
    <div id="message" class="random-message">Αντίο... ή μήπως όχι;</div>
    <div id="chat">
        <iframe src="https://www.giambaj.it/twitch/jchat/v2/?channel=Magnex44&size=1&font=0" 
                frameborder="0" 
                scrolling="no" 
                width="100%" 
                height="100%">
        </iframe>
    </div>

    <!-- Spotify Player -->
    <iframe id="spotify-player" src="https://6klabs.com/widget/spotify/5d78c9dbaaec83d004b2b3d6f5c081a5f27861cafcda7a76d028d87521548916/6700c1028c65e9f7fe2c92ab" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe>

    <script>
        const startingTime = 15 * 60; // Start at 15 minutes in seconds
        const realDuration = 10 * 60; // Real countdown duration is 10 minutes (600 seconds)
        let elapsedRealTime = 0; // Real time elapsed in seconds
        let countdownTime = startingTime; // Fake countdown time starting at 15 minutes

        let countdownElem = document.getElementById('countdown');
        let messageElem = document.getElementById('message');

        // Random spooky messages in Greek
        const spookyMessages = [
            "Οι σκιές παρακολουθούν...",
            "Δεν είσαι μόνος...",
            "Φαντάσματα στην μηχανή...",
            "Πρόσεχε τα μεσάνυχτα...",
            "Είναι πιο κοντά απ' όσο νομίζεις...",
            "Μην κοιτάς πίσω σου!"
        ];

        // Function to format time as mm:ss
        function formatTime(seconds) {
            let minutes = Math.floor(seconds / 60);
            let sec = seconds % 60;
            return `${minutes}:${sec < 10 ? '0' : ''}${sec}`;
        }

        // Function to update countdown
        function updateCountdown() {
            elapsedRealTime++;

            // Adjust the countdown speed randomly but always finish in 600 seconds
            const progress = elapsedRealTime / realDuration; // From 0 to 1 over real 10 minutes
            const fakeSpeedFactor = Math.random() < 0.5 ? 1.5 : 0.5; // Random speed factor
            const adjustedProgress = progress * (1 + fakeSpeedFactor - 1); // Adjusted progress

            // Countdown time is interpolated to finish at 0 at the real 600-second mark
            countdownTime = startingTime * (1 - progress); // Interpolating from 15:00 to 0:00

            // Update the countdown display
            countdownElem.textContent = formatTime(Math.max(Math.floor(countdownTime), 0));

            // Randomly show a spooky message with reduced frequency
            if (Math.random() < 0.1 && countdownTime > 0) { // Adjusted frequency to 10%
                messageElem.textContent = spookyMessages[Math.floor(Math.random() * spookyMessages.length)];
                messageElem.classList.add('visible');
            } else {
                messageElem.classList.remove('visible');
            }

            // Make the countdown glitch randomly
            if (Math.random() < 0.2) {
                countdownElem.classList.add('glitch');
            } else {
                countdownElem.classList.remove('glitch');
            }

            // Stop the countdown at 0
            if (countdownTime <= 0) {
                clearInterval(countdownInterval);
                countdownElem.textContent = "Time's Up!";
                messageElem.textContent = "";
                document.getElementById('chat').style.display = "none"; // Hide chat on end
            }
        }

        // Function to create random spooky emotes
        const createEmote = () => {
            const emote = document.createElement('img');
            const emotes = [
                'https://cdn.7tv.app/emote/632e6b316a8f862aab97f12b/2x.webp',
                'https://cdn.7tv.app/emote/6163464e18f0c6373068fdf3/2x.webp',
                'https://cdn.7tv.app/emote/632f288c2745301490ac28fb/2x.webp',
                'https://cdn.7tv.app/emote/616ea69ab6d21adaffbe8a68/2x.webp',
				'https://cdn.7tv.app/emote/6189c634f1ae15abc7ec6bcb/2x.webp',
				'https://cdn.7tv.app/emote/61e351e13441abfa431cadf8/2x.webp',
				'https://cdn.7tv.app/emote/632dd1f17cf6d10203526a9a/2x.webp',
				'https://cdn.7tv.app/emote/633ece0ef89e2afddea837c4/2x.webp'
            ];

            emote.src = emotes[Math.floor(Math.random() * emotes.length)];
            emote.style.position = 'absolute';
            emote.style.width = '50px'; // Set a width for the emotes
            emote.style.pointerEvents = 'none'; // Allow clicks to pass through

            // Position emote randomly around the screen
            const x = Math.random() * (window.innerWidth - 50); // Adjust to window width
            const y = Math.random() * (window.innerHeight - 50); // Adjust to window height
            emote.style.left = `${x}px`;
            emote.style.top = `${y}px`;

            // Append emote to body
            document.body.appendChild(emote);

            // Remove emote after some time
            setTimeout(() => {
                emote.remove();
            }, 3000);
        };

        // Start the countdown and emotes creation
        const countdownInterval = setInterval(() => {
            updateCountdown();
            createEmote();
        }, 1000); // Update every second
    </script>

</body>
</html>